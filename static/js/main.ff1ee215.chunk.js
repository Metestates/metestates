(this.webpackJsonpmetestates=this.webpackJsonpmetestates||[]).push([[0],{61:function(t,e,n){},64:function(t,e,n){},65:function(t,e,n){"use strict";n.r(e);var r=n(31),a=n.n(r),i=n(40),c=n(3),o=n.n(c),s=n(47),l=n.n(s),d=(n(61),n(7)),u=n(35),h={ParcelPixelWidth:32,ParcelPixelMinWidth:14,ParcelPixelMaxWidth:80,ParcelBlockWidth:4,ParcelsPerQuery:16,Origin:{x:0,y:0},PanningStep:3},f=function(){var t=c.useState({width:window.innerWidth,height:window.innerHeight}),e=Object(d.a)(t,2),n=e[0],r=e[1];return c.useEffect((function(){function t(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[window.innerWidth,window.innerHeight]),n};function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Math.max(e||-1/0,Math.min(t,n||1/0))}var x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{delta:1},n=c.useState(t),r=Object(d.a)(n,2),a=r[0],i=r[1];return c.useEffect((function(){function t(t){var n=w(a+(t.deltaY<0?-1*e.delta:e.delta),e.minValue,e.maxValue);i(n)}return window.addEventListener("wheel",t),function(){window.removeEventListener("wheel",t)}}),[a,i]),a};var p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=c.useState(t),n=Object(d.a)(e,2),r=n[0],a=n[1];return c.useEffect((function(){function t(t){var e=h.PanningStep,n={x:0,y:0};switch(t.key){case"ArrowUp":n.y=e;break;case"ArrowDown":n.y=-e;break;case"ArrowLeft":n.x=-e;break;case"ArrowRight":n.x=e}a({x:r.x+n.x,y:r.y+n.y})}return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[r,a]),r},y=n(50),g=n(36),b=n(32);var v,P=n(77),m=n(48),j=n(75),k=Object(j.a)(v||(v=Object(m.a)(["\n\tquery GET_PARCEL_BLOCK(\n\t\t$first: Int,\n\t\t$xGte: BigInt\n\t\t$xLt: BigInt\n\t\t$yLte: BigInt\n\t\t$yGt: BigInt\n\t) {\n\t\tparcels(\n\t\t\tfirst: $first,\n\t\t\twhere: { x_gte: $xGte, x_lt: $xLt, y_lte: $yLte, y_gt: $yGt }\n\t\t) {\n\t\t\tid\n\t\t\t# tokenId\n\t\t\towner {\n\t\t\t\taddress\n\t\t\t}\n\t\t\tx\n\t\t\ty\n\t\t\t# data {\n\t\t\t# \tname\n\t\t\t# \tdescription\n\t\t\t# \tipns\n\t\t\t# }\n\t\t\testate {\n\t\t\t\t# id\n\t\t\t\t# tokenId\n\t\t\t\towner {\n\t\t\t\t\taddress\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]))),O=function(t){var e={first:h.ParcelsPerQuery,xGte:t.x,xLt:t.x+Math.sqrt(h.ParcelsPerQuery),yLte:t.y,yGt:t.y-Math.sqrt(h.ParcelsPerQuery)},n=Object(P.a)(k,{errorPolicy:"all",variables:e}),r=n.data,a=n.loading,i=n.error;return i&&console.warn("Failed to fetch block at (".concat(t.x,", ").concat(t.y,"): ").concat(JSON.stringify(i))),{blockData:r,isBlockDataLoading:a,blockError:i}},L=function(t){var e,n,r,a=t.x,i=t.y,c={x:(e=a)-e%h.ParcelBlockWidth,y:(n=i)-n%h.ParcelBlockWidth},o=O(c),s=o.blockData,l=o.isBlockDataLoading,d=o.blockError;return s&&(r=function(t,e,n){return null===t||void 0===t?void 0:t.parcels.find((function(t){return parseInt(t.x)===e&&parseInt(t.y)===n}))}(s,a,i)),{parcel:r,isBlockDataLoading:l,blockError:d}},M=n(9),E={padding:"4px",fontSize:"9px",filter:"grayscale(0.0)",transition:"filter 0.35s ease-in-out"},I=c.memo((function(t){var e,n=t.data,r=t.columnIndex,a=t.rowIndex,i=t.style,c=L({x:r+n.xMin,y:n.yMax-a}),o=c.parcel,s=c.isBlockDataLoading,l=c.blockError;if(o){var d=function(t){return(t.estate?t.estate:t).owner.address}(o),u=(n.selectedParcel,"0x9a6ebe7e2a7722f8200d0ffb63a1f6406a0d7dce"===(e=d)?[0,0,0,255]:(e=e.slice(2),[parseInt(e.slice(0,12),16)%256,parseInt(e.slice(12,24),16)%256,parseInt(e.slice(24,36),16)%256,255])),h=function(t,e){return e&&!1===function(t,e){var n;if(e.estate||t.estate){if(e.estate&&t.estate){if(e.estate.owner.address===t.estate.owner.address)return!0}else if(e.estate){if(e.estate.owner.address===t.owner.address)return!0}else if(e.owner.address===(null===(n=t.estate)||void 0===n?void 0:n.owner.address))return!0}else if(t.owner.address===e.owner.address)return!0;return!1}(t,e)?.05:1}(o,n.selectedParcel),f="".concat(1-h);return Object(M.jsx)("div",{onMouseEnter:function(){return n.setSelectedParcel(o)},style:Object(b.a)(Object(b.a)({backgroundColor:"rgba(".concat(u.join(","),")")},E),{},{filter:"grayscale(".concat(f,")")},i)})}return s||l||!o?Object(M.jsx)("div",{style:Object(b.a)(Object(b.a)({opacity:s?.4:.8,backgroundColor:l?"red":"grey"},E),i),children:Object(M.jsxs)("p",{children:["(",r+n.xMin,",",n.yMax-a,")",s&&"Loading\u2026",l&&"Error!"]})}):(console.warn("This should be impossible!"),null)}),g.b),B=Object(y.a)((function(t,e,n,r,a){return{size:t,xMin:e,yMax:n,selectedParcel:r,setSelectedParcel:a}}));var S=function(t){var e=t.parcelBounds,n=t.parcelCellSize,r=t.screenDimensions,a=t.selectedParcel,i=t.setSelectedParcel,c=e[0].x-0,o=e[0].y+0,s=Math.ceil(r.width/n),l=Math.ceil(r.height/n),d=B(n,c,o,a,i);return Object(M.jsx)("div",{onMouseLeave:function(){return i(null)},children:Object(M.jsx)(g.a,{className:Object(u.a)({width:"".concat(r.width,"px !important"),height:"".concat(r.height,"px !important"),overflow:"hidden !important","&:hover":{cursor:"pointer"}}),width:r.width,height:r.height,columnWidth:n,rowHeight:n,columnCount:s,rowCount:l,itemKey:function(t){return"(".concat(t.columnIndex,",").concat(t.rowIndex,")")},itemData:d,children:I})})};n(64);var W=function(){var t=f(),e=x(h.ParcelPixelWidth,{delta:4,minValue:h.ParcelPixelMinWidth,maxValue:h.ParcelPixelMaxWidth}),n=p(h.Origin),r=[n,{x:n.x+Math.sqrt(h.ParcelsPerQuery),y:n.y-Math.sqrt(h.ParcelsPerQuery)}],a=o.a.useState(null),i=Object(d.a)(a,2),c=i[0],s=i[1];return Object(M.jsx)("div",{className:Object(u.a)({color:"lightgray",backgroundColor:"white",width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),overflow:"hidden"}),children:Object(M.jsx)(S,{parcelBounds:r,parcelCellSize:e,screenDimensions:t,selectedParcel:c,setSelectedParcel:s})})},C=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),r(t),a(t),i(t),c(t)}))},D=n(51),$=n.n(D),G=n(76),z=n(74),F=n(73);function Q(){return _.apply(this,arguments)}function _(){return(_=Object(i.a)(a.a.mark((function t(){var e,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new G.a({typePolicies:{Parcel:{keyFields:["x","y"]}}}),$.a.config({name:"metestates",storeName:"keyvaluepairs",description:"Local storage for the Metestates web app."}),n=new z.a({uri:"https://api.thegraph.com/subgraphs/name/decentraland/marketplace",cache:e}),t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(){return(q=Object(i.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q();case 2:e=t.sent,l.a.render(Object(M.jsx)(o.a.StrictMode,{children:Object(M.jsx)(F.a,{client:e,children:Object(M.jsx)(W,{})})}),document.getElementById("root")),C();case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){q.apply(this,arguments)}()}},[[65,1,2]]]);
//# sourceMappingURL=main.ff1ee215.chunk.js.map